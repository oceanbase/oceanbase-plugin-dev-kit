set(CPACK_PACKAGE_DESCRIPTION_SUMMARY "OceanBase Plugin Development Kit")
set(CPACK_PACKAGE_VENDOR "OceanBase Inc.")
set(CPACK_PACKAGE_DESCRIPTION "OceanBase Plugin Development Kit")
set(CPACK_PACKAGE_NAME "oceanbase-plugin-dev-kit")
set(CPACK_PACKAGE_CONTACT "https://open.oceanbase.com")

#set(CPACK_PACKAGE_VERSION_MAJOR ${PROJECT_VERSION_MAJOR}) # CMAKE_PROJECT_VERSION_MAJOR
#set(CPACK_PACKAGE_VERSION_MINOR ${PROJECT_VERSION_MINOR}) # CMAKE_PROJECT_VERSION_MINOR
#set(CPACK_PACKAGE_VERSION_PATCH ${PROJECT_VERSION_PATCH}) # CMAKE_PROJECT_VERSION_PATCH
#set(CPACK_PACKAGE_VERSION       ${PROJECT_VERSION})
set(CPACK_PACKAGE_RELOCATABLE ON)

# set a default release number
if(NOT DEFINED PACKAGE_RELEASE)
  set(PACKAGE_RELEASE 1)
endif()

set(CPACK_RPM_PACKAGE_LICENSE "Apache-2.0")
set(CPACK_RPM_PACKAGE_GROUP   "Development/Libraries")
set(CPACK_RPM_FILE_NAME       "RPM-DEFAULT")
set(CPACK_RPM_PACKAGE_RELEASE ${PACKAGE_RELEASE})
message(STATUS "CPACK_RPM_PACKAGE_RELEASE is ${CPACK_RPM_PACKAGE_RELEASE}")
# RPM doesn't support this changelog format
# set(CPACK_RPM_CHANGELOG_FILE ${PROJECT_SOURCE_DIR}/CHANGELOG.md)
# The directory below conflicts with cmake-filesystem/cmake-2.8
list(APPEND CPACK_RPM_EXCLUDE_FROM_AUTO_FILELIST_ADDITION "/usr/lib64/cmake")

set(CPACK_DEBIAN_FILE_NAME          DEB-DEFAULT)
set(CPACK_DEBIAN_PACKAGE_MAINTAINER "OceanBase")
set(CPACK_DEBIAN_PACKAGE_SECTION    "devel")
set(CPACK_DEBIAN_PACKAGE_PRIORITY   "optional")
set(CPACK_DEBIAN_PACKAGE_RELEASE    ${PACKAGE_RELEASE})
message(STATUS "CPACK_DEBIAN_PACKAGE_RELEASE is ${CPACK_DEBIAN_PACKAGE_RELEASE}")

include(CPack)

cpack_add_component(
  plugin-devkit
  DISPLAY_NAME oceanbase-plugin-dev-kit
  DESCRIPTION  "OceanBase Plugin Development Kit")
